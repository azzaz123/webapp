<div class="CheckoutItem d-flex flex-column p-4">
  <div *ngIf="isFreeOptionAvailable" class="CheckoutItem__subscription pb-3 mb-3 pb-md-0 d-flex align-items-center">
    <tsl-toggle-form [(ngModel)]="isFreeOptionSelected" (ngModelChange)="toggleItem()"> </tsl-toggle-form>
    <span class="ml-2">Use bumps from my subscription </span>
    <div class="ml-auto d-flex align-items-center CheckoutItem__delete" (click)="onRemoveItem(itemWithProducts.item.id, selectedType.name)">
      <span class="d-none d-sm-flex mr-2">Delete</span>
      <tsl-svg-icon [src]="'/assets/icons/delete.svg'"></tsl-svg-icon>
    </div>
  </div>
  <div class="d-flex w-100">
    <tsl-item-avatar
      class="d-none d-md-inline"
      [item]="itemWithProducts.item"
      size="big"
      title="{{ itemWithProducts.item.title }}"
    ></tsl-item-avatar>
    <div class="d-flex flex-column w-100">
      <div class="CheckoutItem__header d-flex align-items-center pb-3 pb-md-0 mb-0 mb-md-2">
        <tsl-item-avatar
          class="d-inline d-md-none"
          [item]="itemWithProducts.item"
          size="small"
          title="{{ itemWithProducts.item.title }}"
        ></tsl-item-avatar>
        <div class="CheckoutItem__title">{{ itemWithProducts.item.title }}</div>
        <div *ngIf="!isFreeOptionAvailable" class="ml-auto d-flex align-items-center CheckoutItem__delete">
          <span class="d-none d-sm-flex mr-2">Delete</span>
          <tsl-svg-icon
            class=""
            (click)="onRemoveItem(itemWithProducts.item.id, selectedType.name)"
            [src]="'/assets/icons/delete.svg'"
          ></tsl-svg-icon>
        </div>
      </div>
      <div class="d-block d-sm-flex flex-wrap flex-xl-nowrap">
        <div>
          <div class="CheckoutItem__subtitle mb-1 mt-3 mt-md-0">Visibility Area</div>
          <div class="d-flex flex-xl-wrap mr-4 pr-4 CheckoutItem__border">
            <ng-container *ngFor="let type of availableTypes">
              <button
                class="btn CheckoutItem__button mb-0 mb-xl-2"
                (click)="selectType(type)"
                [ngClass]="{ 'CheckoutItem__button--selected': type === selectedType }"
              >
                {{ type.name === BUMP_TYPES.ZONE_BUMP && itemWithProducts.isProvincialBump ? 'Provincial' : type.name }}
              </button>
            </ng-container>
          </div>
        </div>
        <div>
          <div class="CheckoutItem__subtitle mb-1 mt-3 mt-xl-0">Duration</div>
          <div class="d-flex flex-xl-wrap">
            <ng-container *ngFor="let duration of availableDurations">
              <button
                class="btn CheckoutItem__button mb-0 mb-xl-2"
                (click)="selectDuration(duration)"
                [ngClass]="{ 'CheckoutItem__button--selected': selectedDuration === duration }"
              >
                {{ duration.duration / 24 }} days
              </button>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="selectedDuration && selectedType" class="text-right w-100 mt-4">
    <ng-container *ngIf="isFreeOptionSelected; else noFreePrice">
      <span class="CheckoutItem__price--discount mr-2">
        {{ selectedDuration?.market_code * creditInfo?.factor | customCurrency: creditInfo?.currencyName }}
      </span>
      <span class="CheckoutItem__price">{{ 0 | customCurrency: creditInfo?.currencyName }}</span>
    </ng-container>
    <ng-template #noFreePrice>
      <span class="CheckoutItem__price">
        {{ selectedDuration?.market_code * creditInfo?.factor | customCurrency: creditInfo?.currencyName }}
      </span>
    </ng-template>
  </div>
</div>
