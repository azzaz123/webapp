<div class="review-item row">
  <div class="images-container">
    <div class="review-image">
      <ng-container *ngIf="review.item?.image; else categoryIcon">
        <a href="{{ itemWebLink }}" target="_blank" tslsanitizedBackground="{{ review.item?.image.small }}" [fallback]="fallback" class="image"></a>
      </ng-container>
      <ng-template #categoryIcon>
        <ng-container *ngIf="(categoryService.getCategoryById(this.review.item.categoryId) | async)?.icon_id as categoryIcon; else defaultImage">
          <tsl-svg-icon src="/assets/icons/categories/normal/{{categoryIcon}}.svg"></tsl-svg-icon>
        </ng-container>
      </ng-template>
      <ng-template #defaultImage>
        <img src="{{ fallback }}" class="image"/>
      </ng-template>
    </div>
    <a href="{{ userWebSlug }}" target="_blank" class="avatar">
      <tsl-user-avatar  *ngIf="this.review.user" [user]="this.review.user" size="40"></tsl-user-avatar>
    </a>
  </div>
  <div class="info">
    <div class="review-type">
      <span *ngIf="this.review.isSold">{{soldCopy}}:</span>
      <span *ngIf="this.review.isBought">{{boughtCopy}}:</span>
    </div>
    <div class="review-title">
      <a *ngIf="review.item?.id" href="{{ itemWebLink }}" target="_blank"> {{ review.item.title }} </a>
      <span *ngIf="!review.item?.id && (categoryService.getCategoryById(this.review.item.categoryId) | async)?.name as categoryName">
         {{ categoryName }} 
      </span>
      <span *ngIf="!review.item?.id && !(categoryService.getCategoryById(this.review.item.categoryId) | async)?.name" i18n="@@WallapopItem">A Wallapop item</span>
    </div>
    <tsl-stars class="review-rating" [stars]="this.review.scoring" [normalized]="false"></tsl-stars>
    <p class="review-comment">{{ this.review.comments }}</p>
    <div class="review-credits">
      <span i18n>Posted by</span>
      <span *ngIf="this.review.user"><a href="{{ userWebSlug }}" target="_blank" class="review-microname">{{ this.review.user.microName }}</a></span>
      <span *ngIf="!this.review.user" i18n="@@WallapopUser">a Wallapop user</span>
      <span i18n>on</span><span> {{ this.review.date | date:'longDate' }}</span>
    </div>
  </div>
</div>
