<div id="stripe" [ngClass]="{'space-between': spaceBetween}">
    <form id="payment-form" method="POST" action="/orders">
        <fieldset class="field-row">
            <div class="form-row">
                <div class="field">
                    <div id="checkout-card" class="input empty" [ngClass]="{'StripeElement--invalid': paymentError}"></div>
                </div>
            </div>
        </fieldset>
        <div class="d-flex flex-column align-items-start">
            <div [ngClass]="{'card-feedback--flexible': showUseSavedCard}">
                <div class="mb-3 StripeCard__error" *ngIf="!!errorTextConfig[paymentError]" >{{errorTextConfig[paymentError]}}</div>
                <div class="mb-3 StripeCard__error" id="card-errors" role="alert" *ngIf="error">
                    {{ error }}
                </div>
            </div>
            <div *ngIf="showSavedCardOption()" class="card-feedback__action"(click)="clickUseSavedCard()" i18n="@@UseSavedCard">Use saved card</div>
        </div>

        <div [hidden]="type !== 'subscription'" class="StripeCardElement__legal-info" i18n>
            By subscribing, you are accepting the <a href="{{termsAndConditionsURL}}" target="_blank">terms & conditions</a>
            and the <a href="{{policyPrivacyURL}}" target="_blank">privacy policy</a> of Wallapop S.L. and Stripe Ltd
        </div>

        <tsl-button [hidden]="type === 'new' || type === 'subscription' || type === 'setDefault'"
                    id="checkout-card-button"
                    className="btn-primary btn-medium stripe"
                    [disabled]="type === 'cart' && !cart?.total || loading"
                    [loading]="loading"
                    (click)="onSubmit()"
                    [tslTrackEvent]="'PURCHASE_CONFIRM_PACK_CREDITS_NO_CARD'"
                    [params]="{ payment_method: 'STRIPE' }"
        >
            <div class="secure-payment">
                <span i18n>Continue to Checkout</span>
            </div>
        </tsl-button>
        <tsl-button *ngIf="type === 'new'"
                    id="checkout-card-button-new"
                    className="btn-primary btn-medium stripe"
                    [loading]="newLoading"
                    [disabled]="disabled || newLoading"
                    (click)="createNewCard()"
        >
            <div class="secure-payment">
                <span i18n>Save</span>
            </div>
        </tsl-button>
        <tsl-button *ngIf="type === 'subscription'"
                    id="checkout-card-button-new"
                    className="btn-primary btn-medium stripe"
                    [disabled]="!listingLimit || disabled || newLoading"
                    [loading]="newLoading"
                    (click)="createNewCard()"
        >
            <div class="secure-payment">
                <span i18n>Subscribe now</span>
            </div>
        </tsl-button>
        <tsl-button *ngIf="type === 'setDefault'"
                    id="checkout-card-button-new"
                    className="btn-primary btn-medium stripe"
                    [disabled]="disabled || newLoading"
                    [loading]="newLoading"
                    (click)="setDefaultCard()"
        >
            <div class="secure-payment">
                <span i18n="@@Save">Save</span>
            </div>
        </tsl-button>
    </form>
</div>