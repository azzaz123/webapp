<div class="item" [ngClass]="{'active': open}">
  <div class="row" (click)="changeExpandedState()">
    <div class="col-6 col-item-title">
      <a href="{{link}}" target="_blank" tslTrackEvent="PRODUCT_VIEWED" [params]="{product_id: item.id}" class="image"><tsl-item-avatar [item]="item" size="medium" fallbackLight="true"></tsl-item-avatar></a>
      <div class="price">{{item.salePrice | customCurrency}}</div>
      <div class="title">{{item.title}}</div>
    </div>
    <div class="col-2 col-date">
      <span>{{item.publishedDate | amCalendar:momentConfig}}</span>
    </div>
    <div class="col-1 col-counters">
      <div class="counters" ngbTooltip="Views" i18n-ngbTooltip placement="top">
        <mat-icon svgIcon="views"></mat-icon>
        <span>{{item.views}}</span>
      </div>
    </div>
    <div class="col-1 col-counters">
      <div class="counters" ngbTooltip="Chats" i18n-ngbTooltip placement="top">
        <mat-icon svgIcon="ico-message"></mat-icon>
        <span>{{item.conversations}}</span>
      </div>
    </div>
    <div class="col-1 col-counters">
      <div class="counters" ngbTooltip="Favorites" i18n-ngbTooltip placement="top">
        <mat-icon svgIcon="heart"></mat-icon>
        <span>{{item.favorites}}</span>
      </div>
    </div>
    <div class="col-1 col-arrow">
      <mat-icon svgIcon="caret"></mat-icon>
    </div>
  </div>
  <div class="stats-expanded" [@collapse]="!open">
    <div class="graphs-container" *ngIf="statsData">
      <div class="charts-box">
        <div class="header">
          <h2 i18n>Statistics</h2>
          <div class="legend">
            <ul>
              <li class="views" i18n>Views</li>
              <li class="chats" i18n>Chats</li>
              <li class="favorites" i18n>Favorites</li>
              <li class="featured" i18n>Featured</li>
            </ul>
          </div>
        </div>
        <div class="charts">
          <tsl-item-stats-graph [item]="item" [statsData]="statsData"></tsl-item-stats-graph>
          <tsl-item-stats-graph [item]="item" [statsData]="statsData" type="favs"></tsl-item-stats-graph>
        </div>
      </div>
    </div>
    <div class="graphs-container graph-info" *ngIf="!item.featured">
      <h2>¿Quieres mejorar tus números?</h2>
      <p class="note">Destaca tu producto y veras como incrementan las impresiones (y las posibilidades de venta) en un 200%</p>
      <tsl-button className="btn-primary btn-block" *ngIf="price" [routerLink]="['/catalog/checkout', {itemId: item.id}]" i18n>Feature it from {{price | customCurrency}}</tsl-button>
    </div>
    <div class="graphs-container graph-info" *ngIf="item.featured">
      <h2>Producto destacado</h2>
      <p class="note">Con el destacado de ciudad consigues que más gente cerca de ti vea tu producto.</p>
      <p class="bump-note">Your feature ends on {{item.bumpExpiringDate | amCalendar:momentConfig}}</p>
    </div>
  </div>
</div>
