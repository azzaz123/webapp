<div class="container">
  <tsl-header>
    <div class="col-12">
      <div class="header-row">
        <h1 class="header-title"><span i18n>Your stats</span></h1>
      </div>
      <div class="header-row header-row--margin">
        <h4 class="header-subtitle" i18n>Here you can see information related with the visualizations, chats and calls
          generated by your car catalog. You can also see the impact on metrics of the highlights you apply.</h4>
      </div>
    </div>
  </tsl-header>
  <tsl-stats-graph></tsl-stats-graph>
  <tsl-stats-graph [yearly]="true"></tsl-stats-graph>
  <div class="stats-sidebar">
    <div class="stats-sidebar-container">
      <h2>
        <span i18n>Pending</span>
        <span [hidden]="!phonesTotal && !messagesTotal">({{phonesTotal + countTotalMessages()}})</span>
      </h2>
    </div>

    <div class="scroll-panel" [hidden]="loading || (!hasConversations() && !hasCalls())">
      <div class="stats-sidebar-container" [hidden]="loading || !hasConversations()">
        <h3>
          <span i18n>Messages</span>
          <a [routerLink]="['/chat']" [hidden]="!messagesTotal"><span i18n>View all</span></a>
        </h3>
        <tsl-inbox-conversation *ngFor="let conversation of conversations | slice: 0: 5;"
                                [conversation]="conversation" [archiveConversation]="true"
                                (click)="openConversation(conversation)"></tsl-inbox-conversation>
      </div>
      <div class="stats-sidebar-container calls-container" [hidden]="loading || !hasCalls()">
        <h3>
          <span i18n>Phones</span>
          <a [routerLink]="['/pro/calls']" [hidden]="!phonesTotal"><span i18n>View all</span></a>
        </h3>
        <tsl-call [call]="call"
                  *ngFor="let call of calls"
                  [routerLink]="['/pro/calls']" [queryParams]="{c: call.id}"
                  (click)="trackPhoneLeadOpened()"
                  [hidden]="!calls.length"></tsl-call>
      </div>
    </div>
    <div class="scroll-panel" [hidden]="!loading">
      <mat-icon svgIcon="spinner" class="spinner" [hidden]="!loading"></mat-icon>
    </div>
    <div [hidden]="loading || hasConversations() || hasCalls()" class="stats-sidebar-completed">
      <div>
        <h2 i18n>Congratulations!</h2>
        <p i18n>You have processed all the pending leads. Good job!</p>
      </div>
    </div>
  </div>
</div>
