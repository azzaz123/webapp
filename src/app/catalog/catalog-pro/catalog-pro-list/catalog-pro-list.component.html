<div class="page-content"
     infiniteScroll
     [infiniteScrollDistance]="5"
     [infiniteScrollThrottle]="100"
     [scrollWindow]="false"
     [infiniteScrollDisabled]="end || loading"
     (scrolled)="loadMore()">
  <tsl-spinner [firstLoad]="false" *ngIf="isUrgent && isRedirect"></tsl-spinner>
  <div class="container">
    <h2 i18n>Catalog</h2>
    <tsl-plan-data></tsl-plan-data>
    <tsl-search-input (term)="search($event)"></tsl-search-input>
    <tsl-catalog-status-navbar (filterByStatus)="filterByStatus($event)" [selectedStatus]="selectedStatus"
                               [counters]="counters"></tsl-catalog-status-navbar>
    <tsl-select [items]="orderBy" (valueChanges)="sort($event)" [value]="sortBy" class="float-right"></tsl-select>
    <div id="top-buttons">
      <tsl-catalog-item-actions (getCounters)="getCounters()" [active]="active" [items]="items"
                                [selectedStatus]="selectedStatus"></tsl-catalog-item-actions>
      <tsl-button className="btn-primary" [routerLink]="['/catalog/upload']" i18n>List a product</tsl-button>
    </div>
    <div class="row items">
      <a class="add-item col-md-12"
         [routerLink]="['/catalog/upload']"
         *ngIf="(!loading || (loading && items.length)) && selectedStatus === 'published'">
      </a>
      <div id="catalog-empty-state" *ngIf="!items.length && !loading">
        <mat-icon svgIcon="pro-items-empty-state" class="image"></mat-icon>
      </div>
      <tsl-catalog-card *ngFor="let item of items" class="col-md-12" [item]="item" (onAction)="onAction($event)"
                        (itemChange)="itemChanged($event)">
      </tsl-catalog-card>
      <tsl-spinner [hidden]="!loading"></tsl-spinner>
    </div>
  </div>
</div>
