<div class="page-content"
     infiniteScroll
     [infiniteScrollDistance]="5"
     [infiniteScrollThrottle]="100"
     [scrollWindow]="false"
     [infiniteScrollDisabled]="end || loading"
     (scrolled)="loadMore()">
  <tsl-spinner [firstLoad]="false" *ngIf="isUrgent && isRedirect"></tsl-spinner>
  <div class="container">
    <h2 i18n>Catalog</h2>
    <div id="top-buttons">
      <button class="btn-upload" [routerLink]="['/catalog/upload']" i18n>Upload</button>
    </div>
    <tsl-search-input (term)="search($event)"></tsl-search-input>
    <nav class="nav filters-nav" [hidden]="itemService.selectedItems.length">
      <a (click)="filterByStatus('active')" [ngClass]="{active: selectedStatus === 'active'}" class="nav-link" i18n>Active
        <span *ngIf="counters && subscriptionPlan > 0">({{counters.publish}}/{{subscriptionPlan}})</span> </a>
      <a (click)="filterByStatus('pending')" [ngClass]="{active: selectedStatus === 'pending'}" class="nav-link" i18n>Inactive
        <span *ngIf="counters">({{counters.onHold}})</span> </a>
      <a (click)="filterByStatus('sold')" [ngClass]="{active: selectedStatus === 'sold'}" class="nav-link" i18n>Sold
        <span *ngIf="counters">({{counters.sells}})</span></a>
    </nav>
    <tsl-select [items]="orderBy" (valueChanges)="sort($event)" [value]="sortBy" class="float-right"
                [hidden]="itemService.selectedItems.length"></tsl-select>
    <div class="row items">
      <a class="add-item col-md-12"
         [routerLink]="['/catalog/upload']"
         *ngIf="(!loading || (loading && items.length)) && selectedStatus === 'published'">
      </a>
      <div  id="catalog-empty-state" *ngIf="!items.length && !loading">
        <mat-icon svgIcon="pro-items-empty-state" class="image"></mat-icon>
      </div>
      <tsl-catalog-pro-item *ngFor="let item of items" [item]="item" (itemChange)="itemChanged($event)" class="col-md-12"></tsl-catalog-pro-item>
      <tsl-spinner [hidden]="!loading"></tsl-spinner>
    </div>
  </div>
</div>
