<div class="topbar-logo-icon">
  <a [href]="homeUrl">
    <md-icon svgIcon="logo" class="topbar-logo-icon"></md-icon>
  </a>
</div>
<div class="dropdown-main-search">
  <div class="input-search">
    <md-icon svgIcon="glass" class="search-glass topbar-icon" [class.active]="focus" (click)="submitForm()"></md-icon>
    <form id="js-main-search-form" method="get">
      <input id="main-search-input" #mainSearchInput placeholder="Search" i18n-placeholder="Search"
             type="text" maxlength="150" name="kws" #kwsEl value="" (focus)="focus=true" (blur)="focus=false"
             (keyup.enter)="submitForm()" [class.active]="focus" [(ngModel)]="model" [ngbTypeahead]="search"
             [inputFormatter]="formatter" [resultTemplate]="suggester" (selectItem)="selectSuggestion($event)"/>
      <input id="main-search-hidden-lat" #latEl name="lat" type="hidden" value="{{ coordinates?.lat }}"/>
      <input id="main-search-hidden-lng" #lngEl name="lng" type="hidden" value="{{ coordinates?.lng }}"/>
      <input id="main-search-hidden-category" #categoryEl name="category" type="hidden" value="{{ category?.categoryId }}"/>
    </form>
    <ng-template #suggester let-r="result">
      <div class="location">
        <span>{{ r.suggestion }}</span>
        <span>{{ r.category_name }}</span>
      </div>
    </ng-template>
    <tsl-categories-list></tsl-categories-list>
    <tsl-geolocation></tsl-geolocation>
  </div>
</div>
<div class="main-header-login">
  <a class="main-header-home menu-link" [href]="homeUrl">
    <md-icon svgIcon="wall" class="topbar-icon"></md-icon>
    <span i18n>Wall</span>

    <div class="horizontal-line"></div>
  </a>
  <a class="main-header-chat menu-link" [routerLink]="['/chat']" [routerLinkActive]="['active']">
    <div class="news-badge"></div>
    <md-icon svgIcon="messages" class="topbar-icon"></md-icon>
    <span i18n>Messages</span>
    <div class="horizontal-line"></div>
  </a>
  <div class="topbar-menu-dropdown" ngbDropdown>
    <div ngbDropdownToggle>
      <tsl-user-avatar class="topbar-avatar" [size]="32" [user]="user" *ngIf="user"></tsl-user-avatar>
      <span class="topbar-user-name">{{user?.microName}}</span>
      <md-icon svgIcon="arrow-waterfall" class="topbar-icon"></md-icon>
    </div>
    <div class="dropdown-menu dropdown-menu-right">
      <a class="dropdown-item" (click)="logout()" i18n>Logout</a>
    </div>
  </div>
</div>
