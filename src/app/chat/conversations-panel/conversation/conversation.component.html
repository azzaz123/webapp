<tsl-archivable>
  <tsl-item-avatar [item]="conversation?.item"></tsl-item-avatar>
    <div class="conversation-info" *ngIf="conversation">
      <div class="item-title-row">
        <div class="conversation-item-title">
          <span>{{conversation.item.title}}</span>
        </div>
        <div class="conversation-item-meta">
          <span
            class="message-date">{{conversation?.modifiedDate| amCalendar:momentConfig }}
          </span>
        </div>
      </div>

    <div class="user-name-row">
      <div class="user-name-row-left">
        <p class="user-name">
          <span>
            {{conversation.user.microName}}
          </span>
        </p>
      </div>
      <div class="user-name-row-right">
        <span [hidden]="conversation.unreadMessages == 0 || conversation.active" class="badge badge-primary badge-pill">
          {{conversation.unreadMessages}}
        </span>
        <mat-icon svgIcon="blocked" *ngIf="conversation.user.blocked"></mat-icon>
      </div>

    </div>

    <div class="message-row">
      <p class="message">
        <mat-icon svgIcon="messages-icon" *ngIf="dashboard && !conversation.expectedVisit" placement="top" ngbTooltip="Messages" i18n-ngbTooltip></mat-icon>
        <mat-icon svgIcon="calendar" *ngIf="dashboard && conversation.expectedVisit" placement="top" ngbTooltip="Meeting" i18n-ngbTooltip></mat-icon>
        {{conversation?.messages[(conversation.messages.length-1)]?.message}}
      </p>
    </div>
  </div>
  <div *ngIf="isProfessional">
    <tsl-archive-button [lead]="conversation" [hidden]="conversation.archived" (click)="archived = true"></tsl-archive-button>
    <tsl-unarchive-button [lead]="conversation" [hidden]="!conversation.archived"></tsl-unarchive-button>
  </div>
</tsl-archivable>
