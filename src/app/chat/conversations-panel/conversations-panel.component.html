<div *ngxPermissionsOnly="['isProfessional']" class="header">
  <h2><span i18n>Your Messages</span> <span class="badge badge-pro silver"><mat-icon svgIcon="pro-seal"></mat-icon>Pro</span></h2>
  <tsl-process-all-button type="conversations"
                          [hidden]="!conversations.length || archive"
                          ngbTooltip="Mark everything as Processed" i18n-ngbTooltip placement="left">
    <mat-icon svgIcon="process-all"></mat-icon>
  </tsl-process-all-button>
  <div class="nav filters-nav">
    <a (click)="filterByArchived(false)" [ngClass]="{active: !archive}"><span i18n>Pending</span></a>
    <a (click)="filterByArchived(true)" [ngClass]="{active: archive}"><span i18n>Processed</span></a>
  </div>
  <div class="separator"></div>
</div>
<div class="scroll-panel" #scrollPanel [ngClass]="{professional: isProfessional}">
  <div id="conversations" [hidden]="loading && (archive ? !conversationService.processedPagesLoaded : !conversationService.pendingPagesLoaded)"> 
    <tsl-conversation *ngFor="let conversation of conversations" [conversation]="conversation"
                      [ngClass]="{'active': conversation?.active}"
                      [hidden]="conversation.messages.length === 0 && conversation.item.owner === userService.user.id" 
                      (click)="setCurrentConversation(conversation)"></tsl-conversation>
  </div>
  <div id="loader" [hidden]="!loading || (archive ? conversationService.processedPagesLoaded : conversationService.pendingPagesLoaded)">
    <mat-icon svgIcon="conversations-mock"></mat-icon>
  </div>
  <div class="load-more-container" *ngIf="conversations.length > 0 && archive ? !conversationService.ended.processed : !conversationService.ended.pending">
    <a class="load-more" (click)="loadMore()">
      <mat-icon svgIcon="spinner" [hidden]="!loading || (archive ? !conversationService.processedPagesLoaded : !conversationService.pendingPagesLoaded)" class="spinner"></mat-icon>
      <span [hidden]="loading" i18n>Load more</span>
    </a>
  </div>
</div>
